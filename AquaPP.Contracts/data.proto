syntax = "proto3";

package aquapp.data;

// Used for API calls that don't require any input parameters.
import "google/protobuf/timestamp.proto";

// --- ENUMS ---

// Status of an asset
enum AssetStatus {
  ASSET_STATUS_UNKNOWN = 0;
  ASSET_STATUS_ONLINE = 1;
  ASSET_STATUS_OFFLINE = 2;
  ASSET_STATUS_WARNING = 3;
  ASSET_STATUS_CRITICAL = 4;
  ASSET_STATUS_MAINTENANCE = 5;
}

// Type of sensor
enum SensorType {
  SENSOR_TYPE_TEMPERATURE = 0;
  SENSOR_TYPE_PRESSURE = 1;
  SENSOR_TYPE_VIBRATION = 2;
  SENSOR_TYPE_FLOW_RATE = 3;
  SENSOR_TYPE_LEVEL = 4;
  SENSOR_TYPE_HUMIDITY = 5;
  SENSOR_TYPE_POWER = 6;
  SENSOR_TYPE_SPEED = 7;
  SENSOR_TYPE_PH = 8;
  SENSOR_TYPE_CONDUCTIVITY = 9;
  SENSOR_TYPE_CUSTOM = 99;
}

// Quality of a sensor reading
enum ReadingQuality {
  READING_QUALITY_GOOD = 0;
  READING_QUALITY_UNCERTAIN = 1;
  READING_QUALITY_BAD = 2;
  READING_QUALITY_SIMULATED = 3;
}

// Severity level of an alert
enum AlertSeverity {
  ALERT_SEVERITY_INFO = 0;
  ALERT_SEVERITY_WARNING = 1;
  ALERT_SEVERITY_CRITICAL = 2;
  ALERT_SEVERITY_EMERGENCY = 3;
}

// --- DATA MESSAGES ---

// Metadata for a monitored asset (a pump, a tank, a pipe section)
message Asset {
  int32 id = 1;
  string name = 2;
  string type = 3;                              // e.g., "Pump", "Tank", "Valve"
  string location = 4;
  AssetStatus status = 5;
  google.protobuf.Timestamp last_seen = 6;
  string description = 7;
  string manufacturer = 8;
  string model_number = 9;
  google.protobuf.Timestamp installation_date = 10;
  repeated Sensor sensors = 11;
}

// Metadata for a sensor attached to an asset
message Sensor {
  int32 id = 1;
  int32 asset_id = 2;
  string name = 3;
  SensorType type = 4;
  string unit = 5;                              // e.g., "Â°C", "PSI", "Hz"
  optional double threshold_low = 6;
  optional double threshold_high = 7;
  optional double min_value = 8;
  optional double max_value = 9;
  int32 sampling_interval_ms = 10;
  bool is_active = 11;
  string description = 12;
}

// A single time-series reading from a sensor
message SensorReading {
  int64 id = 1;
  int32 sensor_id = 2;
  google.protobuf.Timestamp timestamp = 3;
  double value = 4;
  ReadingQuality quality = 5;
  string notes = 6;
}

// An alert triggered when sensor readings exceed thresholds
message Alert {
  int32 id = 1;
  int32 sensor_id = 2;
  google.protobuf.Timestamp timestamp = 3;
  AlertSeverity severity = 4;
  string message = 5;
  double trigger_value = 6;
  optional double threshold_value = 7;
  bool acknowledged = 8;
  google.protobuf.Timestamp acknowledged_at = 9;
  string acknowledged_by = 10;
  string notes = 11;
}